{"ts":1363141337754,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<?php\tinclude_once('./session.php'); ?>\n<!DOCTYPE html>\n<html dir=\"ltr\" lang=\"en\">\n\t<head>\n\t\t<title>PRISM :: Server Status</title>\n\t\t<link rel=\"stylesheet\" href=\"resources/style/default.css\" type=\"text/css\" media=\"screen\" />\n\t\t<link rel=\"shortcut icon\" href=\"resources/images/logo/logo-1-black.png\" />\n\t\t<link rel=\"shortcut icon\" href=\"/favicon.png\"> \n\t</head>\n\t<body>\n\t\t<div class=\"loginArea\">\n<?php\tif (isset($_SESSION['user'])):\t?>\n\t\t\tWelcome <?php echo htmlspecialchars($_SESSION['user']); ?>.\n<?php\t\tif (!isset($_SESSION['autoLogin']) || $_SESSION['autoLogin'] == FALSE):\t?>\n\t\t\t\t-<a href=\"/login.php?logout\">Logout</a>\n<?php\t\tendIf;\n\t\telse:\t?>\n\t\t\t<form method=\"post\" action=\"/login.php\">\n\t\t\t\t<input type=\"text\" name=\"loginUser\" value=\"\" size=\"16\" maxlength=\"24\" />\n\t\t\t\t<input type=\"password\" name=\"loginPass\" value=\"\" size=\"16\" maxlength=\"24\" />\n\t\t\t\t<input type=\"submit\" value=\"Login\" />\n\t\t\t</form>\n<?php\tendIf;\t?>\n\t\t</div>\n\t\t<table>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<th width=\"24%\">Host Alias</th>\n\t\t\t\t\t<th width=\"10%\">Type</th>\n\t\t\t\t\t<th width=\"10%\">IP:Port (UDP Port)</th>\n\t\t\t\t\t<th width=\"16%\"><abbr title=\"Packets Per Second\">PPS</abbr> <abbr title=\"Transmitted\">TX</abbr></th>\n\t\t\t\t\t<th width=\"16%\"><abbr title=\"Packets Per Second\">PPS</abbr> <abbr title=\"Recived\">RX</abbr></th>\n\t\t\t\t\t<th width=\"24%\">Clients (Players) / Slots</th>\n\t\t\t\t</tr>\n<?php\tforEach ($PRISM->hosts->getHostsInfo() as $info):\t?>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><?php echo $info['id']; ?></td>\n\t\t\t\t\t<td><?php echo ($info['useRelay']) ? 'Relay' : 'Direct'; ?></td>\n\t\t\t\t\t<td><?php echo \"{$info['ip']}:{$info['port']} ({$info['udpPort']})\"; ?></td>\n\t\t\t\t\t<td>2</td>\n\t\t\t\t\t<td>24</td>\n<?php\t\tif ($info['connStatus'] == CONN_VERIFIED):\t?>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div class=\"meter\">\n<!--\t\t\t\t\t\t<div class=\"bar admins\" style=\"width: 6.25%; float:left;\"></div> -->\n\t\t\t\t\t\t\t<div class=\"bar players\" style=\"width: <?php echo ($PRISM->hosts->state[$info['id']]->NumP / 47) * 100; ?>%; float:left;\"></div>\n\t\t\t\t\t\t\t<div class=\"bar clients\" style=\"width: <?php echo ($PRISM->hosts->state[$info['id']]->NumConns / 47) * 100; ?>%; float:left;\"></div>\n\t\t\t\t\t\t\t<div class=\"text\"><?php echo \"{$PRISM->hosts->state[$info['id']]->NumConns} ({$PRISM->hosts->state[$info['id']]->NumP}) / 47\"; ?></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n<?php\t\telse:\t?>\n\t\t\t\t\t<td>NOT CONNECTED</td>\n<?php\t\tendIf;\t?>\n\t\t\t\t</tr>\n<?php\tendForEach;\t?>\n\t\t\t</tbody>\n\t\t</table>\n\t\t<table>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Command</th>\n\t\t\t\t\t<th>Descriptoin</th>\n\t\t\t\t</tr>\n<?php\n\tforEach ($PRISM->plugins->getPlugins() as $plugin => $details):\n\t\tforEach ($details->sayCommands as $command => $detail):\n?>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><?php echo $command; ?></td>\n\t\t\t\t\t<td><?php echo htmlspecialchars($detail['info'], ENT_QUOTES); ?></td>\n\t\t\t\t</tr>\n<?php\n\t\tendForEach;\n\tendForEach;\n?>\n\t\t\t</tbody>\n\t\t</table>\n\t\t<table>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t<th>Version</th>\n\t\t\t\t\t<th>Author</th>\n\t\t\t\t\t<th>Descriptiom</th>\n\t\t\t\t</tr>\n<?php\tforEach ($PRISM->plugins->getPlugins() as $plugin => $details):\t?>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><?php echo $plugin::NAME; ?></td>\n\t\t\t\t\t<td><?php echo $plugin::VERSION; ?></td>\n\t\t\t\t\t<td><?php echo $plugin::AUTHOR; ?></td>\n\t\t\t\t\t<td><?php echo $plugin::DESCRIPTION; ?></td>\n\t\t\t\t</tr>\n<?php\tendForEach;\t?>\n\t\t\t</tbody>\n\t\t</table>\n\t\t<table>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>IP</th>\n\t\t\t\t\t<th>PORT</th>\n\t\t\t\t\t<th>LAST ACTIVITY</th>\n\t\t\t\t</tr>\n<?php\tforEach ($PRISM->http->getHttpInfo() as $Client):\t?>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><?php echo $Client['ip']; ?></td>\n\t\t\t\t\t<td><?php echo $Client['port']; ?></td>\n\t\t\t\t\t<td><?php echo time() - $Client['lastActivity']; ?></td>\n\t\t\t\t</tr>\n<?php\tendForEach;\t?>\n\t\t\t\t<tr>\n\t\t\t\t\t<td colspan=\"3\">Counted <?php echo $PRISM->http->getHttpNumClients(); ?> http client(s).</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t</body>\n</html>\n<?php\nif (isset($_SESSION))\n{\n\t$_SESSION['counter']++;\n\t$_SESSION['lasttime'] = time();\n}\nelse\n{\n\t$_SESSION = array\n\t(\n\t\t'counter' => 1, \n\t\t'staticvar' => 'mooh', \n\t\t'lasttime' => time()\n\t);\n}\n?>"]],"start1":0,"start2":0,"length1":0,"length2":3927}]],"length":3927}
